# 1. Описание

**Хакатон**: "Цифровой Прорыв" (12-14 сентября 2020, Приволжский IT-ХАБ)

**Кейс**: Россети, "Разработка системы диагностики дефектов воздушных линий электропередачи 
по данным фотосъемки с беспилотных летательных аппаратов" (https://leadersofdigital.ru/event/63012/case/104625)

Данный репозиторий содержит код модуля `uploader`
(схему архитектуры можно посмотреть на lucidchart, powerlines-hack, arch_hack_version).

# 2. Запуск

## 2.1. Предварительные действия

1) Данный модуль взаимодействует с RabbitMq и PostgreSQL. Так что необходимо их где-то развернуть.

    Для запуска на локальной машине рекомендуется запустить у себя
докер контейнеры для RabbitMq, PostgreSQL (Nginx для отдачи фото не обязательно, если вы планируете только
тестить загрузку файлов).

    На сервере же нужно, во-первых, выбрать директорию, куда будут записываться и читаться файлы,
    во-вторых, развернуть nginx, который будет отдавать файлы из указанной директории,
    в-третьих, данный модуль uploader тоже должен записывать в указанную директорию
    (в `config/` файлах это поле `server=>upload=>storage_path`).

2) В файле `config/dev.json` нужно заменить данные пользователя, пароля, хосты и порты
на те, что соответствуют вашим сервисам.

    На самом деле, можно создать новый **json** (!) файл в директории `config`, например, назвать
    `my_config.json` и при запуске указать переменную окружения `DEVLABS_UPLOAD_CFG_TYPE=my_config`.
    И тогда приложение возьмет конфиг из файла `config/my_config.json`.

## 2.2. Запуск (local development)

Проект написан на **Go 1.14.6**. В целом, использовались только стандартные функции библиотек
и стандартный возможности языка, так что и на более ранних версиях языка, возможно, можно собирать.

## 2.3. Docker